Bengine.extensibles.slide=new function(){this.type="slide",this.name="slide",this.category="media",this.upload=!0,this.accept=".pdf,.ppt,.pptx,.pps,.ppsx";var t=this,e={files:{},pdfObjects:{},renderPDF:function(t,e,n){t.getPage(e).then(function(t){var e=t.getViewport(.8);n.height=e.height,n.width=e.width;var i={canvasContext:n.getContext("2d"),viewport:e};t.render(i).promise.then(function(){})})},pageTurn:function(t){var n=t.pageX-(window.innerWidth-this.clientWidth)/2,i=this.childNodes[0],s=i.getAttribute("data-page"),r=i.getAttribute("id"),d=e.pdfObjects[r].numPages;n>this.clientWidth/2?s<d&&(s++,i.setAttribute("data-page",s),e.renderPDF(e.pdfObjects[r],s,i)):s>1&&(s--,i.setAttribute("data-page",s),e.renderPDF(e.pdfObjects[r],s,i))}};this.destroy=function(){},this.fetchDependencies=function(){return[{inner:"",integrity:"",source:"https://mozilla.github.io/pdf.js/build/pdf.js",type:"text/javascript",wait:"pdfjsLib"}]},this.insertContent=function(n,i){var s=document.createElement("canvas");return s.setAttribute("class","xSli"),s.setAttribute("id",content),s.setAttribute("data-page","1"),s.setAttribute("data-sid",t.p.createUUID()),n.appendChild(s),t.p.emptyObject(i)||pdfjsLib.getDocument(i.content).then(function(t){e.pdfObjects[i.content]=t;var s=n.childNodes[0];e.renderPDF(t,1,s)}),n.onmouseup=e.pageTurn,n},this.afterDOMinsert=function(t,n,i){if(null!==n){n=window.location.origin+n;var s=new XMLHttpRequest;s.open("GET",n),s.responseType="arraybuffer",s.onload=function(i){var s=document.getElementById(t).childNodes[0].getAttribute("data-sid"),r=n.split("/");e.files[s]=new File([i.target.response],r[r.length-1],{type:"application/pdf"})},s.send(),pdfjsLib.getDocument(n).then(function(i){e.pdfObjects[n]=i;var s=document.getElementById(t).childNodes[0];s.setAttribute("id",n),e.renderPDF(i,1,s)})}},this.runBlock=null,this.runData=null,this.saveContent=function(t){return{content:document.getElementById(t).children[0].id.replace(location.href.substring(0,location.href.lastIndexOf("/")+1),"")}},this.saveFile=function(t){return e.files[document.getElementById(t).children[0].getAttribute("data-sid")]},this.showContent=function(t,n){var i=document.createElement("canvas");return i.setAttribute("class","xSli-show"),i.setAttribute("id",n.content),i.setAttribute("data-page","1"),t.appendChild(i),""!==n&&pdfjsLib.getDocument(content).then(function(n){e.pdfObjects[content]=n;var i=t.childNodes[0];e.renderPDF(n,1,i)}),t.onmouseup=e.pageTurn,t},this.styleBlock=function(){return".xSli, .xSli-show {\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tborder: 1px solid black;\n\t\t\tborder-radius: 2px;\n\n\t\t\tpadding: 0px;\n\t\t\tmargin: 0px;\n\t\t\tbox-sizing: border-box;\n\t\t}"}};