Bengine.extensibles.audio=new function(){this.type="audio",this.name="audio",this.category="media",this.upload=!0,this.accept=".aac,.aiff,.m4a,.mp3,.ogg,.ra,.wav,.wma";var t=this,e={files:{}};this.destroy=function(){},this.fetchDependencies=function(){return null},this.insertContent=function(e,n){var i=document.createElement("audio");i.setAttribute("class","xAud"),i.volume=.8,i.setAttribute("controls","controls"),i.setAttribute("data-url",null),i.setAttribute("data-aid",t.p.createUUID());var r=document.createElement("source");return n.url&&r.setAttribute("src",n.content),r.setAttribute("type","audio/mpeg"),i.appendChild(r),e.appendChild(i),e},this.afterDOMinsert=function(t,n,i){var r=document.getElementById(t).childNodes[0];if(i){var a=r.getAttribute("data-aid");e.files[a]=i,r.childNodes[0].src=URL.createObjectURL(i),r.load()}else if(null!==n){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="arraybuffer",s.onload=function(t){var i=r.getAttribute("data-aid"),a=n.split("/");e.files[i]=new File([t.target.response],a[a.length-1],{type:"audio/mp3"}),r.childNodes[0].src=URL.createObjectURL(new Blob([t.target.response],{type:"audio/mp3"})),r.load()},s.send(),r.setAttribute("data-url",n)}},this.runBlock=null,this.runData=null,this.saveContent=function(t){return{content:document.getElementById(t).children[0].getAttribute("data-url").replace(location.href.substring(0,location.href.lastIndexOf("/")+1),"")}},this.saveFile=function(t){var n=document.getElementById(t).children[0].getAttribute("data-aid");return e.files[n]},this.showContent=function(t,e){var n=document.createElement("audio");n.setAttribute("class","xAud-show"),n.volume=.8,n.setAttribute("controls","controls");var i=document.createElement("source");return i.setAttribute("src",e.content),i.setAttribute("type","audio/mpeg"),n.appendChild(i),t.appendChild(n),t},this.styleBlock=function(){return".xAud, .xAud-show {\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 100%;\n\n\t\t\tpadding: 0px;\n\t\t\tmargin: 0px;\n\t\t\tbox-sizing: border-box;\n\t\t}"}};